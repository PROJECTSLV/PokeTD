{% extends "base.html" %}

{% block title %}Pokemon Tower Defense - Game{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/game.css">
{% endblock %}

{% block content %}
<div class="game-container">
    <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ -->
    <div class="game-info">
        <div class="health-bar">
            <span>HP:</span>
            <div class="health-bar-container">
                <div id="playerHealth" class="health-bar-fill" style="width: 100%"></div>
            </div>
            <span id="healthValue">100</span>
        </div>

        <div class="level-info">
            <div>Level: <span id="playerLevel">1</span></div>
            <div>XP: <span id="playerExp">0</span>/<span id="playerMaxExp">100</span></div>
        </div>

        <div class="game-stats">
            <div>Wave: <span id="currentWave">1</span></div>
            <div>Score: <span id="score">0</span></div>
            <div>Pokeballs: <span id="pokeballCount">5</span></div>
        </div>
    </div>

    <!-- Ð˜Ð³Ñ€Ð¾Ð²Ð¾Ðµ Ð¿Ð¾Ð»Ðµ -->
    <div class="game-field-container">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>

    <!-- Ð ÑƒÐºÐ° Ð¸Ð³Ñ€Ð¾ÐºÐ° -->
    <div class="player-hand">
        <h3>Your Hand</h3>
        <div class="cards-container" id="handContainer">
            <!-- ÐšÐ°Ñ€Ñ‚Ñ‹ Ð·Ð°Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· JS -->
            <div style="text-align: center; width: 100%; padding: 40px; color: #666;">
                No cards in hand. Open a pokeball to get your first Pokemon!
            </div>
        </div>
        <button id="openPokeballBtn" class="btn btn-pokeball">
            ðŸŽ¯ Open Pokeball (Left: <span id="pokeballsLeft">5</span>)
        </button>
    </div>

    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
    <div class="game-controls">
        <button id="pauseBtn" class="btn btn-control">Pause</button>
        <button id="quitBtn" class="btn btn-control btn-danger">Surrender</button>
    </div>

    <!-- ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÐ½Ð¾ ÐºÐ¾Ð½Ñ†Ð° Ð¸Ð³Ñ€Ñ‹ -->
    <div class="end-game-modal" id="endGameModal">
        <div class="modal-content">
            <h2 id="gameResultTitle"></h2>
            <div class="game-result-stats">
                <p>Score: <span id="finalScore">0</span></p>
                <p>Waves Completed: <span id="finalWaves">0</span></p>
                <p>Enemies Defeated: <span id="finalEnemies">0</span></p>
            </div>
            <div class="modal-buttons">
                <button id="playAgainBtn" class="btn btn-primary">Play Again</button>
                <button id="returnToLobbyBtn" class="btn btn-secondary">Back to Lobby</button>
            </div>
        </div>
    </div>
</div>

{% block extra_js %}
<script src="/static/js/game.js"></script>
{% endblock %}
{% endblock %}